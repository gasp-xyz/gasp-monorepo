services:
  gasp-syncer:
    image: mangatasolutions/gasp-syncer:${GASP_SYNCER_VERSION:-local}
    restart: no
    build:
      context: .
      dockerfile: src/bin/Dockerfile
      platforms: [linux/amd64]
      args:
        - BINARY_PATH=${GASP_SYNCER_BINARY_PATH:-target/release/main}
    depends_on:
      anvil:
        condition: service_healthy
      avs-3:
        condition: service_completed_successfully
    platform: linux/amd64
    environment:
      - RUST_LOG=info
      - SOURCE_RPC_URL=${ETH_RPC_URL:-http://anvil:8545}
      - SOURCE_WS_URL=${ETH_WS_URL:-ws://anvil:8545}
      - TARGET_RPC_URL=${ETH_RPC_URL:-http://anvil:8545}
      - TARGET_WS_URL=${ETH_WS_URL:-ws://anvil:8545}
      - SOURCE_CHAIN_ID=31337
      - TARGET_CHAIN_ID=31337
      - AVS_REGISTRY_COORDINATOR_ADDR=0x851356ae760d987E095750cCeb3bC6014560891C
      - GASP_SERVICE_ADDR=0x4826533B4897376654Bb4d4AD88B7faFD0C98528
      - TESTNET=true
      - PUSH_FIRST_INIT=true
      - ECDSA_KEY_JSON={"address":"a0ee7a142d267c1f36714e4a8f75612f20a79720","crypto":{"cipher":"aes-128-ctr","ciphertext":"b0f6f8e3ba33f0b382b080de6661d827181de480f1a4f94bc20d66cb3d585907","cipherparams":{"iv":"4e3f9a8ca6ef8d1cd408e8aaae3c22d2"},"kdf":"scrypt","kdfparams":{"dklen":32,"n":262144,"p":1,"r":8,"salt":"c8f9f8cc03913e09cee7e1fd68732fac327576203ab277d740270f1dea82ee7e"},"mac":"353d65850b20d5fdb90ca2385c52e5b57662cb1d906fd58143f20a7720723cf6"},"id":"d3036cc7-d068-4f2f-9667-60aaca660e61","version":3}
  
