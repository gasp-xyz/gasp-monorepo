remoteCluster: true

enableArbitrumServices: false
blockscoutEnabled: false


####################
# evm-node configs #
####################
evmNode:
  enabled: false

#####################
# collator configs #
#####################
collatorsEnabled: false
# TODO: Those configs below are not used for this env as collators for it are deployed from `gitops` repository
# and we are using `gitops` repository for deploying the collators for this env
collator:
  image:
    repository: mangatasolutions/rollup-node
    tag: 3a07824d8b8a6ad027424629b814a5edb61654cf
  disableChainspecGeneration: true
  customChainspecUrl: https://raw.githubusercontent.com/mangata-finance/chainspec/master/rollup-holesky-3a07824d8b8a6ad027424629b814a5edb61654cf-raw.json
  enableServiceMonitorCollectors: true
  storageClass: node-data-volume-retain
  storageSize: 50Gi
  wsHealthExporter:
    enabled: true
    image: paritytech/ws-health-exporter:bc071a44-20230830
    env:
      WSHE_NODE_MIN_PEERS: 2
  tolerations:
    - key: production
      operator: Equal
      value: "true"
      effect: NoSchedule
  # Node specific collator configs
  collator01:
    # Identity ID: 12D3KooWAfm5cK7DuUa2zh9SrSoHr2fsXXYbLALWXs5ob9mTDKHJ
    customNodeKey: '5ad94653edf592f59d1b54960cda1334596cc3dcab8dd96adb334d3e22e912ef'
    bootnodeAddr: /dns/collator-02-p2p/tcp/30333/p2p/12D3KooWFz4zM26EKYTpX98GhLhS3KLv7mUyvpYXCdzxdrorSVCu
    extraArgs:
      - --alith
      - --no-mdns
      - --reserved-only
      - --reserved-nodes=/dns/collator-02-p2p/tcp/30333/p2p/12D3KooWFz4zM26EKYTpX98GhLhS3KLv7mUyvpYXCdzxdrorSVCu
      - --pruning=archive
    nodeSelector:
      production: "true"
      topology.kubernetes.io/zone: europe-west1-b
  collator02:
    # Identity ID: 12D3KooWFz4zM26EKYTpX98GhLhS3KLv7mUyvpYXCdzxdrorSVCu
    customNodeKey: 'bcaf1bb787b48156aadaf318603e5b37e637883edafb850912e364e913e2c35b'
    bootnodeAddr: /dns/collator-01-p2p/tcp/30333/p2p/12D3KooWAfm5cK7DuUa2zh9SrSoHr2fsXXYbLALWXs5ob9mTDKHJ
    extraArgs:
      - --baltathar
      - --no-mdns
      - --reserved-only
      - --reserved-nodes=/dns/collator-01-p2p/tcp/30333/p2p/12D3KooWAfm5cK7DuUa2zh9SrSoHr2fsXXYbLALWXs5ob9mTDKHJ
      - --pruning=archive
    nodeSelector:
      production: "true"
      topology.kubernetes.io/zone: europe-west1-c

####################
# evm-node configs #
####################
envEth:
  # rpc
  SUBSTRATE_RPC_URL: wss://rollup-testnet-rpc.gasp.xyz:443
  # contracts
  CHAIN_ID: '17000'
  AVS_REGISTRY_COORDINATOR_ADDR: 0xfd6A45621DDfeBF94C082e60E0De92aA305a97a1
  AVS_DEPLOYMENT_BLOCK: '1233400'
  # AVS
  AVS_SERVER_IP_PORT_ADDRESS: 0.0.0.0:8090
  # every 100th block, ~ 10min
  AVS_BLOCK_VALIDATION_PERIOD: '100'
  # 5min
  AVS_TASK_EXPIRATION: '300'
  # every 25th task, ~ 4h
  AVS_KICK_PERIOD: '25'
  # every 150th task, ~ daily
  AVS_UPDATE_STAKE_PERIOD: '150'
  # wait 20s for next RPC response even if task done
  AVS_DEBOUNCE_RPC: '20'
  # OP
  AVS_RPC_URL: https://avs-aggregator-testnet.mangata.online
  RUST_LOG: avs=debug
  OPT_IN_AT_STARTUP: 'true'

######################
# aggregator configs #
######################
aggregatorEnabled: true
aggregatorEnvSecrets:
  ECDSA_KEY_JSON: ref+sops://secrets.enc.yaml#/testnetAggregatorEcdsaKeyJson
  ECDSA_KEY_PASSWORD: ref+sops://secrets.enc.yaml#/testnetAggregatorEcdsaKeyPassword
  ETH_RPC_URL: ref+sops://secrets.enc.yaml#/holeskyEthereumHttpsUrl
  ETH_WS_URL: ref+sops://secrets.enc.yaml#/holeskyEthereumWssUrl

#####################
# finalizer configs #
#####################
secondFinalizerEnabled: false
finalizerEnabled: true
finalizerEnableServiceMonitorCollectors: true
finalizerEnvSecrets:
  ECDSA_KEY_JSON: ref+sops://secrets.enc.yaml#/testnetFinalizerEcdsaKeyJson
  ECDSA_KEY_PASSWORD: ref+sops://secrets.enc.yaml#/testnetFinalizerEcdsaKeyPassword
  BLS_KEY_JSON: ref+sops://secrets.enc.yaml#/testnetFinalizerBlsKeyJson
  BLS_KEY_PASSWORD: ref+sops://secrets.enc.yaml#/testnetFinalizerBlsKeyPassword
  ETH_RPC_URL: ref+sops://secrets.enc.yaml#/holeskyEthereumHttpsUrl
  ETH_WS_URL: ref+sops://secrets.enc.yaml#/holeskyEthereumWssUrl

###########################
# rollup-updater configs #
###########################
updaterEnabled: true

updaterChainUrlEth: ref+sops://secrets.enc.yaml#/holeskyEthereumHttpsUrl
updaterMnemonicEth: ref+sops://secrets.enc.yaml#/testnetUpdaterMnemonicEth
updaterEnvEth:
  L1_CHAIN: "Ethereum"
  MANGATA_NODE_URL: wss://collator-01-ws-rollup-testnet.mangata.online
  EIGEN_CONTRACT_ADDRESS: "0x329D0C4a58B3cEfdb40c5513E155228f6Cc7B6c5"
  MANGATA_CONTRACT_ADDRESS: "0x998AaF69F731009d4E2d470E974766F1EB8f5142"
  CHAIN: "holesky"
  FINALIZATION_SOURCE: "relay"
  LIMIT: "25"

updaterChainUrlArb: ws://evm-node-arb:8546
updaterMnemonicArb: "ac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80"
updaterEnvArb:
  CHAIN: "reth"
  L1_CHAIN: "Arbitrum"
  MANGATA_NODE_URL: ws://collator-01:9944
  EIGEN_CONTRACT_ADDRESS: "0x1613beB3B2C4f22Ee086B2b38C1476A3cE7f78E8"
  MANGATA_CONTRACT_ADDRESS: "0xDc64a140Aa3E981100a9becA4E685f962f0cF6C9"
  FINALIZATION_SOURCE: "relay"


############################
# rollup-sequencer configs #
############################
sequencerEnabled: true
secondSequencerEnabled: false

firstSequencerMnemonicEth: ref+sops://secrets.enc.yaml#/testnetFirstSequencerMnemonicEth
secondSequencerMnemonicEth: ref+sops://secrets.enc.yaml#/testnetSecondSequencerMnemonicEth
sequencerChainUrlEth: ref+sops://secrets.enc.yaml#/holeskyEthereumHttpsUrl
sequencerEnvEth:
  L1_CHAIN: "Ethereum"
  MANGATA_NODE_URL: wss://collator-01-ws-rollup-testnet.mangata.online
  MANGATA_CONTRACT_ADDRESS: "0x329D0C4a58B3cEfdb40c5513E155228f6Cc7B6c5"
  LIMIT: "500"

firstSequencerMnemonicArb: "0x0b6e18cafb6ed99687ec547bd28139cafdd2bffe70e6b688025de6b445aa5c5b"
secondSequencerMnemonicArb: "bottom drive obey lake curtain smoke basket hold race lonely fit walk//Bob"
sequencerChainUrlArb: ws://evm-node-arb:8546
sequencerEnvArb:
  CHAIN: "reth"
  L1_CHAIN: "Arbitrum"
  MANGATA_NODE_URL: ws://collator-01:9944
  MANGATA_CONTRACT_ADDRESS: "0xDc64a140Aa3E981100a9becA4E685f962f0cF6C9"
